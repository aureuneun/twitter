(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(34),s=n.n(r),i=n(12),o=n(25);n(41),n(53),n(54);o.a.initializeApp({apiKey:"AIzaSyDeOUhf8cGG8ee2wc-QoGAhnRirtWFRKA4",authDomain:"twitter-87c95.firebaseapp.com",projectId:"twitter-87c95",storageBucket:"twitter-87c95.appspot.com",messagingSenderId:"152502669961",appId:"1:152502669961:web:6265bcc5e5bc8ce6e2ac58"});var u=o.a,l=o.a.auth(),j=o.a.firestore(),d=o.a.storage(),b=n(21),p=n(6),h=n(23),m=n(36),x=n(13),O=n(1),f=function(){return Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/",style:{marginRight:30},children:Object(O.jsx)(x.a,{icon:h.c,color:"#04AAFF",size:"2x"})})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/profile",style:{marginLeft:30},children:Object(O.jsx)(x.a,{icon:m.a,color:"#04AAFF",size:"2x"})})})]})})},v=n(11),g=n(9),w=n.n(g),y=n(18),N=n(24),k=function(e){var t,n=e.id,c=e.text,r=e.creatorId,s=e.attachmentUrl,o=Object(a.useState)({isEditing:!1,tweet:c}),u=Object(i.a)(o,2),b=u[0],p=u[1],h=function(e){p((function(e){return{tweet:c,isEditing:!e.isEditing}}))},m=function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.doc("tweets/".concat(n)).update({text:b.tweet});case 3:p(Object(v.a)(Object(v.a)({},b),{},{isEditing:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"nweet",children:b.isEditing?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:m,className:"container nweetEdit",children:[Object(O.jsx)("input",{type:"text",placeholder:"Edit your tweet",value:b.tweet,onChange:function(e){var t=e.currentTarget.value;p(Object(v.a)(Object(v.a)({},b),{},{tweet:t}))},maxLength:100,required:!0,autoFocus:!0,className:"formInput"}),Object(O.jsx)("input",{type:"submit",value:"Update tweet",className:"formBtn"})]}),Object(O.jsx)("span",{onClick:h,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:c}),s&&Object(O.jsx)("img",{src:s,alt:"attachment"}),r===(null===(t=l.currentUser)||void 0===t?void 0:t.uid)&&Object(O.jsxs)("div",{className:"nweet__actions",children:[Object(O.jsx)("span",{onClick:Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this tweet?")){e.next=7;break}return e.next=4,j.doc("tweets/".concat(n)).delete();case 4:if(!s){e.next=7;break}return e.next=7,d.refFromURL(s).delete();case 7:case"end":return e.stop()}}),e)}))),children:Object(O.jsx)(x.a,{icon:N.d})}),Object(O.jsx)("span",{onClick:h,children:Object(O.jsx)(x.a,{icon:N.a})})]})]})})},A=n(56),C=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],u=s[1],b=function(){var e=Object(y.a)(w.a.mark((function e(t){var a,r,s,i,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",""===o){e.next=10;break}return i=d.ref().child("".concat(null===(s=l.currentUser)||void 0===s?void 0:s.uid,"/").concat(Object(A.a)())),e.next=6,i.putString(o,"data_url");case 6:return b=e.sent,e.next=9,b.ref.getDownloadURL();case 9:r=e.sent;case 10:return e.next=12,j.collection("tweets").add({text:n,createdAt:Date.now(),creatorId:null===(a=l.currentUser)||void 0===a?void 0:a.uid,attachmentUrl:r});case 12:c(""),u("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:b,className:"factoryForm",children:[Object(O.jsxs)("div",{className:"factoryInput__container",children:[Object(O.jsx)("input",{className:"factoryInput__input",type:"text",placeholder:"What is on your mind?",value:n,onChange:function(e){var t=e.currentTarget.value;c(t)},maxLength:100,required:!0}),Object(O.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(O.jsxs)("label",{className:"factoryInput__label",children:[Object(O.jsx)("span",{children:"Add photos"}),Object(O.jsx)(x.a,{icon:N.b}),Object(O.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.currentTarget.files;if(t){var n=t[0],a=new FileReader;n?a.readAsDataURL(n):u(""),a.onloadend=function(){u(String(a.result))}}},id:"attach-file",style:{display:"none"}})]}),o&&Object(O.jsxs)("div",{className:"factoryForm__attachment",children:[Object(O.jsx)("img",{src:o,alt:"attachment",style:{backgroundImage:o}}),Object(O.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return u("")},children:[Object(O.jsx)("span",{children:"Remove"}),Object(O.jsx)(x.a,{icon:N.c})]})]})]})},S=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=j.collection("tweets").orderBy("createdAt").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));c(t);var n=document.getElementById("message");n&&(n.scrollTop=n.scrollHeight)}));return function(){return e()}}),[]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(C,{}),Object(O.jsx)("div",{style:{marginTop:30,maxHeight:"38vh",overflow:"scroll"},id:"message",children:n.map((function(e){return Object(O.jsx)(k,Object(v.a)({},e),e.id)}))})]})},I=function(){var e,t=Object(p.f)(),n=Object(a.useState)(String(null===(e=l.currentUser)||void 0===e?void 0:e.displayName)),c=Object(i.a)(n,2),r=c[0],s=c[1],o=function(){var e=Object(y.a)(w.a.mark((function e(n){var a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),(null===(a=l.currentUser)||void 0===a?void 0:a.displayName)===r){e.next=4;break}return e.next=4,null===(c=l.currentUser)||void 0===c?void 0:c.updateProfile({displayName:r});case 4:t.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("form",{onSubmit:o,className:"profileForm",children:[Object(O.jsx)("input",{type:"text",placeholder:"Display name",value:r,onChange:function(e){var t=e.currentTarget.value;s(t)},autoFocus:!0,className:"formInput"}),Object(O.jsx)("input",{type:"submit",value:"Update profile",className:"formBtn",style:{marginTop:10}})]}),Object(O.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){l.signOut(),t.push("/")},children:"Sign out"})]})},F=[{path:"/",component:Object(O.jsx)(S,{})},{path:"/profile",component:Object(O.jsx)(I,{})}],E=function(){return Object(O.jsxs)(b.a,{children:[Object(O.jsx)(f,{}),Object(O.jsx)(p.c,{children:Object(O.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:F.map((function(e){return Object(O.jsx)(p.a,{exact:!0,path:e.path,children:e.component},e.path)}))})})]})},U=n(27),_=function(){var e=Object(a.useState)({email:"",password:"",newAccount:!0,error:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=function(e){var t=e.currentTarget,a=t.name,r=t.value;c(Object(v.a)(Object(v.a)({},n),{},Object(U.a)({},a,r)))},s=function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!n.newAccount){e.next=7;break}return e.next=5,l.createUserWithEmailAndPassword(n.email,n.password);case 5:e.next=9;break;case 7:return e.next=9,l.signInWithEmailAndPassword(n.email,n.password);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c(Object(v.a)(Object(v.a)({},n),{},{error:e.t0.message}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:s,className:"container",children:[Object(O.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:n.email,onChange:r,required:!0,className:"authInput"}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:r,required:!0,className:"authInput"}),Object(O.jsx)("input",{type:"submit",className:"authInput authSubmit",value:n.newAccount?"Create account":"sign in"}),n.error&&Object(O.jsx)("span",{className:"authError",children:n.error})]}),Object(O.jsx)("span",{onClick:function(){return c((function(e){return Object(v.a)(Object(v.a)({},e),{},{newAccount:!e.newAccount})}))},className:" authSwitch",children:n.newAccount?"Sign In":"Create Account"})]})},B=function(){var e=function(){var e=Object(y.a)(w.a.mark((function e(t){var n,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("google"!==(n=t.currentTarget.name)){e.next=7;break}return a=new u.auth.GoogleAuthProvider,e.next=5,l.signInWithPopup(a);case 5:e.next=11;break;case 7:if("github"!==n){e.next=11;break}return c=new u.auth.GithubAuthProvider,e.next=11,l.signInWithPopup(c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"authContainer",children:[Object(O.jsx)(x.a,{icon:h.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(O.jsx)(_,{}),Object(O.jsxs)("div",{className:"authBtns",children:[Object(O.jsxs)("button",{name:"google",onClick:e,className:"authBtn",children:["Continue with Google ",Object(O.jsx)(x.a,{icon:h.b})]}),Object(O.jsxs)("button",{name:"github",onClick:e,className:"authBtn",children:["Continue with Github ",Object(O.jsx)(x.a,{icon:h.a})]})]})]})},T=[{path:"/",component:Object(O.jsx)(B,{})}],D=function(){return Object(O.jsx)(b.a,{children:Object(O.jsx)(p.c,{children:Object(O.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",display:"flex",justifyContent:"center"},children:T.map((function(e){return Object(O.jsx)(p.a,{exact:!0,path:e.path,children:e.component},e.path)}))})})})},P=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1];return Object(a.useEffect)((function(){l.onAuthStateChanged((function(e){u(!!e),c(!0)}))}),[]),Object(O.jsx)(O.Fragment,{children:n?o?Object(O.jsx)(E,{}):Object(O.jsx)(D,{}):Object(O.jsx)("span",{children:"Initialization..."})})};n(51);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(P,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.916b8bac.chunk.js.map